on:
  release:
    types: [published]

jobs:
  test-workflow:
    runs-on: ubuntu-latest
    name: modex-iteration-cloud-pw
    steps:
      - name: run-workflow
        id: run-cloud-pw
        uses: parallelworks/test-workflow-action@v5
        with:
          pw-user-host: 'cloud.parallel.works'
          pw-api-key: ${{ secrets.PW_API_KEY }}
          pw-user: 'sfgary'
          resource-pool-names: 'cloud'
          workflow-name: 'sl_core'
          workflow-parameters: '{"commands|ml_arch_repo": "git@github.com:parallelworks/dynamic-learning-rivers", "commands|ml_arch_branch": "modex_random_add", "commands|ml_code_repo": "https://github.com/parallelworks/sl_core", "commands|ml_data_repo": "https://github.com/parallelworks/global-river-databases", "commands|whost": "cloud", "commands|n_jobs": "8", "commands|num_inputs": "25", "commands|cross_val_score": "False", "commands|hpo": "True", "commands|model_dir": "./model_dir", "commands|hpo": "False", "commands|backend": "loky"}'
